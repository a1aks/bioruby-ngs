#!/usr/bin/env ruby

require 'thor/group'

class BioNGS < Thor::Group
  include Thor::Actions
  # the project name
  argument :project_name
  
  def self.source_root
     File.expand_path(File.dirname(__FILE__))
  end
  
  def create_project_dir
    empty_directory project_name
  end
  
  def create_sub_dirs
    empty_directory File.join("#{project_name}","data")
    empty_directory File.join("#{project_name}","log")
    empty_directory File.join("#{project_name}","tasks")
    empty_directory File.join("#{project_name}","scripts")
    empty_directory File.join("#{project_name}","conf")
  end
  
  def create_tasks
    path = BioNGS.source_root
    Dir.glob(File.join(File.dirname(path),"templates","*.erb")).each do |f|
      name = f.split(File::SEPARATOR)
      filename = name[-1].split('.')
      template(f, "#{project_name}/tasks/#{filename[0]}.thor")
    end
  end
  
  
end

BioNGS.start
